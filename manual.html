<!DOCTYPE html>
<html lang=en-us>
  <meta charset=utf-8>
  <meta name="viewport" content="width=device-width">
  <title>Ghurlbot manual</title>
  <link rel=stylesheet type="text/css"
	href="https://www.w3.org/Guide/guide2006.css">
  <link rel="shortcut icon"
	href="https://www.w3.org/Icons/WWW/Literature.gif">
  <style>
    table {width: 80%; table-layout: fixed; border-collapse: collapse;
	   margin-left: auto; margin-right: auto; background: #eee}
    th, td {border-bottom: 1px solid #999; padding: 0.5em}
    td code {color: black; background: none}
  </style>

  <h1>Ghurlbot manual</h1>

  <p>Ghurlbot is an IRC bot that looks up GitHub issues, creates new
    issues and action items, or closes them. It typically has the
    nickname ‘ghurlbot’ on IRC.</p>

  <p>This manual describes how to interact with a running ghurlbot on
    IRC. A separate manual is included in
    the <a href="https://github.com/w3c/GHURLBot" >program source</a>
    and describes how to run ghurlbot.</p>

  <h2>Command quick reference</h2>

  <table>
    <thead>
      <tr><th>Command</th> <th>Effect</th></tr>
    </thead>
    <tbody>
      <tr>
	<td class=command><code>w3c/aria#15<br>
	    aria#15<br>
	    #15</code></td>
	<td><a href="#info">Look up an issue (which may also be a pull
	    request or an action)</a></td>
      </tr>
      <tr>
	<td class=command><code>@joe</code></td>
	<td><a href="#name">Link to a user profile</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, use w3c/scribe2</code></td>
	<td><a href="#repo">Specify a repository to use</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, drop w3c/scribe2</code></td>
	<td><a href="#remove">Remove a repository from ghurlbot's list</a></td>
      </tr>
      <tr>
	<td class=command><code>Issue: Foo is undefined</code></td>
	<td><a href="#create-issue">Create a new issue</a></td>
      </tr>
      <tr>
	<td class=command><code>action Eve: send mail<br>
	action: Eve to send mail</code></td>
	<td><a href="#create-action">Create a new action</a></td>
      </tr>
      <tr>
	<td class=command><code>action Eve: send mail - due in 2 weeks<br>
	action Eve: send mail due 3 June</code></td>
	<td><a href="#create-action">Create a new action with a due
	date</a></td>
      </tr>
      <tr>
	<td class=command><code>action @eve78: send mail</code></td>
	<td><a href="#create-action">Create action using a GitHub
	account name</a></td>
      </tr>
      <tr>
	<td class=command><code>close #15</code></td>
	<td><a href="#close">Close an issue or action</a></td>
      </tr>
      <tr>
	<td class=command><code>reopen aria/#15</code></td>
	<td><a href="#reopen">Reopen an issue or action</a></td>
      </tr>
      <tr>
	<td class=command><code>/invite ghurlbot</code></td>
	<td><a href="#invite">Invite ghurlbot to the current
	channel</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, bye</code></td>
	<td><a href="#invite">Dismiss ghurlbot from the current
	channel</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, off<br>
	ghurlbot, on</code></td>
	<td><a href="#suspend">Stop ghurlbot from processing issues,
	actions and names; or turn it back on</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, names off<br>
	ghurlbot, names on</code></td>
	<td><a href="#suspend">Stop ghurlbot from processing names; or
	turn it back on</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, issues off<br>
	ghurlbot, issues on</code></td>
	<td><a href="#suspend">Stop ghurlbot from processing issues
	and actions; or turn it back on</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, delay 20</code></td>
	<td><a href="#delay">Set the number of lines before ghurlbot
	looks up the same issue or name again</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, ignore RRSAgent, Zakim</code></td>
        <td><a href="#ignore">Nicks that cannot open or close issues
        &amp; actions</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, don't ignore Zakim</code></td>
        <td><a href="ignore">Let Zakim open/close issues &amp; actions
        again</a></td>
      </tr>
      <tr>
        <td class=command><code>ghurlbot, Eve = eve78<br>
        ghurlbot, Eve is eve78</code></td>
        <td><a href="#aliases">Define aliases for GitHub account names</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, status</code></td>
	<td><a href="#status">Get information about the current delay
	and repositories, and whether ghurlbot is turned off</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, account</code></td>
	<td><a href="#account">Get the name of the GitHub account that
	ghurlbot uses</a></td>
      </tr>
      <tr>
	<td class=command><code>ghurlbot, help</code></td>
	<td><a href="#help">Provides a link to the manual</a></td>
      </tr>
  </table>

  <h2 id=info>IRC command to link to an issue</h2>

  <p>When somebody types something that looks like a repository name
    followed by <code>#</code> and an issue number, ghurlbot responds
    with the full URL of that issue or pull request:</p>

  <pre class=command>&lt;joe&gt; Let's talk about foo/bar#13.
&lt;ghurlbot&gt; https://github.com/foo/bar/issues/13 -&gt; #13</pre>

  <p>(The <code>-&gt;</code> is understood
    by <a href="https://w3c.github.io/scribe2/scribedoc.html"
    >scribe.perl</a> and causes the URL to be formatted as a link when
    scribe.perl generates HTML from the IRC log.)</p>

  <p>Ghurlbot also tries to look up the issue on GitHub. If it
    succeeds, it not only shows a URL, but also a summary, e.g.:</p>

  <pre class=command>&lt;joe&gt; Next topic: w3c/scribe2#15
&lt;ghurlbot&gt; https://github.com/w3c/scribe2/issues/15 -&gt; Issue 15 [closed] Feature request: syntax for verbatim lines of code (dbooth-boston)</pre>

  <p>Ghurlbot fails to look up an issue if it does not have access to
    a GitHub account or if the issue is in a private repository,
    see <a href="#account" >‘GitHub account’</a>. (Ghurlbot may also
    fail due to network problems.)</p>

  <p>If you have told ghurlbot what repositories you are discussing
    (see <a href="#repo">below</a>), you can abbreviate the repository
    name, or even omit it:</p>

  <pre class=command>&lt;joe&gt; Next topic: #15
&lt;ghurlbot&gt; https://github.com/w3c/scribe2/issues/15 -&gt; Issue 15 [closed] Feature request: syntax for verbatim lines of code (dbooth-boston)</pre>

  <p>If you have told ghurlbot to look at more than one repository,
    the above will only look in the repository that was added last. To
    look up an issue in one of the other repositories, prefix the
    number with the name of the repository:</p>

  <pre class=command>&lt;joe&lgt; Let's talk about aria#13.</pre>

  <p>The prefix only needs to be long enough to be unambiguous. So if
    there are no other repositories known to ghurlbot that start with
    an ‘a’, it is enough to say</p>

  <pre class=command>&lt;joe&gt; a#13</pre>

  <p>You can optionally include the repository owner in the prefix:</p>

  <pre class=command>&lt;joe&gt; w3c/a#13</pre>

  <p>Only if none of the repositories that ghurlbot knows start with
    those letters, ghurlbot assumes that the given name represents the
    full name of a repository.</p>

  <p>In that case you can omit the owner if it is the same as the
    repository at the top of ghurlbot's list:</p>

  <pre class=command>&lt;joe&gt; Is scribe2#3 the same issue?
&lt;ghurlbot&gt; https://github.com/w3c/scribe2/issues/3 -> Issue 3 [closed] Errors replacing URLs (nigelmegitt)</pre>

  <h2 id=name>IRC command to link to a user name</h2>

  <p>When somebody types <code>@</code> plus a name, it responds with
    the full URL to that person or team. E.g.:</p>

  <pre class=command>&lt;joe&gt; That comment came from @aliciag
&lt;ghurlbot&gt; https://github.com/aliciag -&gt; @aliciag</pre>

  <p>ghurlbot only expands a reference that is on in its own, not one
    that seems to be attached to something else, such as an email
    address (e.g., ‘contact@aliciag.com’). If ghurlbot does not seem
    to recognize a reference, try to put spaces around it.</p>

  <h2 id=repo>Specifying the GitHub repository</h2>

  <p>To be able to refer to issues and pull requests with the
    abbreviated syntax, you need to say what repository is being
    discussed on this channel:</p>

  <pre class=command>&lt;joe&gt; ghurlbot, discussing https://github.com/xxx/yyy</pre>

  <p>Instead of <code>discussing</code>, you can also
    use <code>discuss</code>, <code>use</code>, <code>using</code>, <code>take
    up</code>, <code>taking up</code>, <code>this will be</code>
    or <code>this is</code>.</p>

  <p>The prefix ‘https://github.com/’ is assumed, so you can also say:</p>

  <pre class=command>&lt;joe&gt; ghurlbot, discussing xxx/yyy</pre>

  <p>And if you previously specified a repository with the same owner,
    you can also omit the owner:</p>

  <pre class=command>&lt;joe&gt; ghurlbot, discussing yyy</pre>

  <p>Every time you use the command, ghurlbot will add the given
    repository to its list. (Or move it to the top of the list, if it
    was already in the list.)

  <p>Ghurlbot remembers the repositories even when it is
    dismissed from a channel. When it is later asked to rejoin, it
    continues using the same repositories.</p>

  <h2 id=remove>Stop using a repository</h2>

  <p>To remove a repository from the list that ghurlbot knows:</p>

  <pre class=command>&lt;joe&gt; ghurlbot, drop xxx/yyy</pre>

  <p>Instead of <code>drop</code>, you can also
    say <code>forget</code>, <code>remove</code>, <code>don't
    use</code> or <code>do not use</code>.</p>

  <h2 id=create-issue>Creating an issue</h2>

  <p>You can create new issues by starting a line
    with <code>issue:</code>:</p>

  <pre class=command>&lt;joe&gt; Issue: is the default 1 or 0?</pre>

  <p>Case does not matter, ‘ISSUE’, ‘issue’ or ‘iSSue’ works also. The
    issue will be created in the repository that is at the top of
    ghurlbot's list. To create an issue in another repository, you
    need to move it to the top first.</p>

  <h2 id=create-action>Creating an action</h2>

  <p>You can create an action item for somebody with either of the
    following two syntaxes:</p>

  <pre class=command>&lt;joe&gt; action alex: review chapter 1
&lt;joe&gt; action: alex to review chapter 1</pre>

  <p>The action will be created in the repository that is at the top of
    ghurlbot's list.</p>

  <p>You can only assign an action to somebody who is associated with
    that repository (an owner or a collaborator).</p>

  <p>An action is in fact a special kind of issue: in addition to a
    title, it also has a label (‘action’), a due date and a person
    assigned to it.</p>

  <p>By default, an action gets a due date in one week, but you can
    explicitly set a date:</p>

  <pre class=command>&lt;joe&gt; action alex: review chapter 1 - due 1 June</pre>

  <p>Many different ways of describing a date are supported, including
    things like ‘in 2 weeks’, ‘tomorrow’ and ‘next Tuesday’.</p>

  <p>By default, the name must be the name of an account on GitHub,
    but you can define <a href="#aliases" >aliases</a>, see below. You
    can also prefix the name with <code>@</code> (in which case
    Ghurlbot will not check if it knows an alias).

  <pre class=command>&lt;joe&gt; action @alex: review chapter 1</pre>

  <h2 id=close>Closing an issue or action</h2>

  <p>You can close an issue or action by starting a line
    with <code>close</code>, followed by an issue number, e.g.:</p>

  <pre class=command>&lt;joe&gt; close aria#15
&lt;joe&gt; close #13
&lt;joe&gt; close w3c/aria#17</pre>

  <p>Case does not matter, ‘CLOSE’, ‘Close’ or ‘ClosE’ works also. The
    issue number can include the full name of the repository or an
    abbreviation, see <a href="#info" >‘IRC command to link to an
    issue: #’</a>.

  <h2 id=reopen>Reopening an issue or action</h2>

  <p>You can reopen an issue or action by starting a line
    with <code>reopen</code>, followed by an issue number, e.g.:</p>

  <pre class=command>&lt;joe&gt; reopen #15</pre>

  <h2 id=ignore>IRC nicks that should not open or close issues &amp;
    actions</h2>

  <p>Certain IRC bots may print text that looks like an action or an
    issue, but isn't really. E.g., RRSAgent repeats all actions at the
    end of a meeting. To stop such bots from inadvertently opening or
    closing issues and actions, you can add their name to an ignore
    list:

  <pre class=command>&lt;joe&gt; ghurlbot, ignore RRSAgent</pre>

  <p>You can specify multiple names (separated by commas and/or
    spaces). Case doesn't matter: ‘rrsagent’ and ‘RRSAgent’ are the
    same.

  <p>If you made a mistake, you can say:

  <pre class=command>&lt;joe&gt; ghurlbot, don't ignore RRSAgent</pre>

  <p>or

  <pre class=command>&lt;joe&gt; ghurlbot, do not ignore RRSAgent</pre>

  <p>IRC nicks are only ignored on the current channel. If you need to
    ignore the same nicks on other channels, you need to repeat the
    command on each of the channels.

  <h2 id=aliases>Mapping names to GitHub accounts</h2>

  <p>When you create an action for somebody, it is usually the easiest
    to use the IRC nick name of that person. But if the IRC nick is
    not the same as the GitHub account name of that person, GitHub
    will assign the action to nobody.

  <p>To help with that, you can define aliases with <code>=</code>
    or <code>is</code>, e.g.:

  <pre class=command>&lt;joe&gt; ghurlbot, Eve = eve78
&lt;joe&gt; ghurlbot, dayan is dcslobo</pre>

  <p>An initial <code>@</code> is optional:

  <pre class=command>&lt;joe&gt; ghurlbot, Eve = @eve78</pre>

  <p>The first name is the one you plan to use when creating actions,
    the second is the corresponding GitHub account name. In fact, you
    can define arbitrary aliases. They don't have to be IRC nicks.

  <h2 id=invite>Inviting and dismissing the bot</h2>

  <p>You can invite the bot to a channel and dismiss it:</p>

  <pre class=command>&lt;joe&gt; /invite ghurlbot
&lt;joe&gt; ghurlbot, bye</pre>

  <h2 id=suspend>Suspending the bot</h2>

  <p>You can tell the bot to stop processing issues, actions and names
    without dismissing it from the channel; and turn it back on
    again:</p>

  <pre class=command>&lt;joe&gt; ghurlbot, off
&lt;joe&gt; ghurlbot, on</pre>

  <p>You can ask the bot to stop expanding just persons and teams:</p>

  <pre class=command>&lt;joe&gt; ghurlbot, set names to off
&lt;joe&gt; ghurlbot, names off
&lt;joe&gt; ghurlbot, names = off</pre>

  <p>Instead of <code>off</code>, you can also use <code>no</code>
    or <code>false</code>. And instead of <code>names</code> you can
    also use <code>persons</code> or <code>teams</code>.</p>

  <p>To ask it to stop processing just issues, pull requests and
    actions, the command is:</p>

  <pre class=command>&lt;joe&gt; ghurlbot, set issues to off
&lt;joe&gt; ghurlbot, issues off
&lt;joe&gt; ghurlbot, issues = off</pre>

  <p>To turn processing back on, replace <code>off</code>
    by <code>on</code>, <code>yes</code> or <code>true</code>.</p>

  <p>When you address GHURLBot directly, it will always respond even if
    it is turned off otherwise:</p>

  <pre class=command>&lt;joe&gt; ghurlbot, #13 and #14?
&lt;ghurlbot&gt; https://github.com/xxx/yyy/issues/13 -&gt; #13
&lt;ghurlbot&gt; https://github.com/xxx/yyy/issues/14 -&gt; #14</pre>

  <h2 id=delay>Reducing the number of responses from the bot</h2>

  <p>To avoid flooding the IRC conversation, the bot will not react to
    an issue number or name if it has already looked up the same
    reference recently. By default, it waits until 15 lines have been
    typed into the IRC channel before expanding the same reference
    again, but that can be configured. All of the following set the
    delay to 20 lines:</p>

  <pre class=command>&lt;joe&gt; ghurlbot, set delay to 20
&lt;joe&gt; ghurlbot, delay 20
&lt;joe&gt; ghurlbot, delay = 20</pre>

  <p>The delay only stops the bot from reacting to normal messages in
    the channel. When you address GHURLBot directly, it will
    respond even if it gave the same URL recently.</p>

  <h2 id=status>Inquiring about the current status</h2>

  <p>You can ask what repository ghurlbot is currently using:</p>

  <pre class=command>&lt;joe&gt; ghurlbot, status?
&lt;ghurlbot&gt; Delay is 15 lines, issues are on, names are on and I'm using https://github.com/xxx/yyy</pre>

  <h2 id=account>GitHub account</h2>

  <p>Ghurlbot can be started with or without (the access codes for) a
    GitHub account. Without an account, it will expand issue numbers
    to URLs, but it cannot look up issue summaries and cannot create
    any new issues or actions.</p>

  <p>To find out what account ghurlbot was started with, use this
    command:</p>

  <pre class=command>&lt;joe&gt; ghurlbot, who are you?
&lt;ghurlbot&gt; I am using GitHub account joe-bot</pre>

  <p>Instead of <code>who are you</code>, you can also
    say <code>account</code>, <code>user</code> or <code>login</code>.

  <p>If ghurlbot, despite having access to a GitHub account, still
    fails to look up issues or create new ones, it may be that the
    repository is private. In that case the owners of the repository
    will have to add ghurlbot's account to the list of accepted
    collaborators.</p>

  <h2 id=help>Getting help</h2>

  <p>The bot also reacts to <code>help</code> with some information
    about itself and a link to this manual.</p>

  <h2 id=rate-limit>Built-in rate limit</h2>

  <p>For security reasons, GHURLBot will write at most 100 times to a
    repository per period of 10 minutes. (I.e., 100 issues or actions
    created, closed or reopened; merely looking up an issue does not
    count.) After 10 minutes, the count is reset. This limit is per
    repository, not per IRC channel. If multiple IRC channels use the
    same repository, their counts are added together.

  <p>In addition, there is a limit on the total number of GitHub
    requests on all repositories and all channels. This includes
    making changes to issues, but also looking up information about an
    issue. This limit is imposed by GitHub and is currently 5000
    operations per hour.

  <h2 id=source>Source</h2>

  <p>GHURLBot is written in Perl.
    The <a href="https://github.com/w3c/GHURLBot" >source</a> is on
    GitHub.

  <hr>

  <address>Created by Bert Bos <a href="mailto:bert@w3.org"
    >&lt;bert@w3.org&gt;</a> on 12&nbsp;January 2022. Last updated
    $Date: Tue Dec 13 01:04:21 2022 UTC $ by $Author: Bert Bos $</address>
